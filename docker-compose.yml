version: "3.9"

services:
  concrete-ai-platform:
    build: .
    container_name: concrete-ai-platform
    restart: unless-stopped
    ports:
      - "${STREAMLIT_SERVER_PORT:-8501}:8501"
    environment:
      # Valeurs par défaut, peuvent être surchargées par un fichier .env
      STREAMLIT_SERVER_PORT: ${STREAMLIT_SERVER_PORT:-8501}
      APP_LOG_LEVEL: ${APP_LOG_LEVEL:-INFO}
    volumes:
      - ./ml_models:/app/ml_models
      - ./database:/app/database
      - ./logs:/app/logs
    command: >
      streamlit run app/main.py
      --server.address=0.0.0.0
      --server.port=${STREAMLIT_SERVER_PORT:-8501}


